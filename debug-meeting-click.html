<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‡ãƒãƒƒã‚°è¨ºæ–­ãƒ„ãƒ¼ãƒ«</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 900px; margin: 0 auto; background: #f5f5f5; }
        h1 { color: #333; }
        .test-box { background: white; padding: 20px; margin: 15px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .test-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #667eea; }
        .result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d1e7dd; color: #0f5132; border: 1px solid #a3cfbb; }
        .error { background: #f8d7da; color: #842029; border: 1px solid #f1aeb5; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        button { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; margin: 5px; }
        button:hover { background: #5568d3; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto; font-size: 12px; }
        .click-test { background: #667eea; color: white; padding: 20px; border-radius: 8px; cursor: pointer; text-align: center; margin: 10px 0; }
        .click-test:hover { background: #5568d3; }
    </style>
</head>
<body>
    <h1>ğŸ” ä¼šè­°ã‚¯ãƒªãƒƒã‚¯å•é¡Œ - ãƒ‡ãƒãƒƒã‚°è¨ºæ–­</h1>
    
    <div class="test-box">
        <div class="test-title">1. window.app ã®å­˜åœ¨ç¢ºèª</div>
        <button onclick="checkWindowApp()">ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ</button>
        <div id="result1"></div>
    </div>
    
    <div class="test-box">
        <div class="test-title">2. app.showMeetingView ã®å­˜åœ¨ç¢ºèª</div>
        <button onclick="checkShowMeetingView()">ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ</button>
        <div id="result2"></div>
    </div>
    
    <div class="test-box">
        <div class="test-title">3. onclick å‹•ä½œãƒ†ã‚¹ãƒˆ</div>
        <div class="click-test" onclick="testOnClick()">
            ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ†ã‚¹ãƒˆ
        </div>
        <div id="result3"></div>
    </div>
    
    <div class="test-box">
        <div class="test-title">4. å®Ÿéš›ã®ä¼šè­°ãƒ‡ãƒ¼ã‚¿ã§å‹•ä½œãƒ†ã‚¹ãƒˆ</div>
        <button onclick="testActualMeeting()">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <div id="result4"></div>
    </div>
    
    <div class="test-box">
        <div class="test-title">5. iframeã§å®Ÿã‚¢ãƒ—ãƒªã‚’ãƒ­ãƒ¼ãƒ‰</div>
        <button onclick="loadActualApp()">ã‚¢ãƒ—ãƒªã‚’ãƒ­ãƒ¼ãƒ‰</button>
        <div id="result5"></div>
        <div id="iframeContainer"></div>
    </div>

    <script>
        function checkWindowApp() {
            const result = document.getElementById('result1');
            if (typeof window.app !== 'undefined') {
                result.innerHTML = '<div class="result success">âœ… window.app ãŒå­˜åœ¨ã—ã¾ã™</div>';
                console.log('window.app:', window.app);
            } else {
                result.innerHTML = '<div class="result error">âŒ window.app ãŒå­˜åœ¨ã—ã¾ã›ã‚“<br>åŸå› : ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã«è¨­å®šã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</div>';
            }
        }
        
        function checkShowMeetingView() {
            const result = document.getElementById('result2');
            if (typeof window.app !== 'undefined' && typeof window.app.showMeetingView === 'function') {
                result.innerHTML = '<div class="result success">âœ… app.showMeetingView ãŒå­˜åœ¨ã—ã¾ã™ï¼ˆé–¢æ•°å‹ï¼‰</div>';
                console.log('app.showMeetingView:', window.app.showMeetingView);
            } else if (typeof window.app !== 'undefined') {
                result.innerHTML = '<div class="result error">âŒ app.showMeetingView ãŒé–¢æ•°ã§ã¯ã‚ã‚Šã¾ã›ã‚“</div>';
                console.log('app:', window.app);
            } else {
                result.innerHTML = '<div class="result error">âŒ window.app ãŒå­˜åœ¨ã—ãªã„ãŸã‚ç¢ºèªã§ãã¾ã›ã‚“</div>';
            }
        }
        
        function testOnClick() {
            const result = document.getElementById('result3');
            result.innerHTML = '<div class="result success">âœ… onclick ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼</div>';
            console.log('onclick test: success');
        }
        
        function testActualMeeting() {
            const result = document.getElementById('result4');
            result.innerHTML = '<div class="result warning">â³ ãƒ†ã‚¹ãƒˆä¸­...</div>';
            
            // Simulate meeting ID
            const testMeetingId = 'meeting-board-1-0';
            
            if (typeof window.app !== 'undefined' && typeof window.app.showMeetingView === 'function') {
                try {
                    console.log('Calling app.showMeetingView with:', testMeetingId);
                    // Don't actually call it as we're not in the app context
                    result.innerHTML = `<div class="result success">âœ… app.showMeetingView ã¯å‘¼ã³å‡ºã—å¯èƒ½ã§ã™<br>
                    ãƒ†ã‚¹ãƒˆID: ${testMeetingId}<br>
                    <strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:</strong> å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§ä¼šè­°ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</div>`;
                } catch (e) {
                    result.innerHTML = `<div class="result error">âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ<br><pre>${e.message}</pre></div>`;
                    console.error('Error:', e);
                }
            } else {
                result.innerHTML = '<div class="result error">âŒ ã“ã®ãƒšãƒ¼ã‚¸ã«ã¯ app ãŒå­˜åœ¨ã—ã¾ã›ã‚“<br>å®Ÿéš›ã®ã‚¢ãƒ—ãƒªãƒšãƒ¼ã‚¸ã§ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</div>';
            }
        }
        
        function loadActualApp() {
            const result = document.getElementById('result5');
            const container = document.getElementById('iframeContainer');
            
            result.innerHTML = '<div class="result warning">â³ ã‚¢ãƒ—ãƒªã‚’ãƒ­ãƒ¼ãƒ‰ä¸­...</div>';
            
            const iframe = document.createElement('iframe');
            iframe.src = '/minutes-app-enhanced.html';
            iframe.style.width = '100%';
            iframe.style.height = '600px';
            iframe.style.border = '1px solid #ddd';
            iframe.style.borderRadius = '8px';
            iframe.style.marginTop = '10px';
            
            iframe.onload = () => {
                result.innerHTML = '<div class="result success">âœ… ã‚¢ãƒ—ãƒªãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸ<br>ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ä¼šè­°ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</div>';
                
                // Try to check app in iframe (will likely fail due to cross-origin)
                try {
                    if (iframe.contentWindow.app) {
                        result.innerHTML += '<div class="result success">âœ… iframeå†…ã® window.app ãŒç¢ºèªã§ãã¾ã—ãŸï¼</div>';
                    }
                } catch (e) {
                    result.innerHTML += '<div class="result warning">âš ï¸ ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³åˆ¶ç´„ã«ã‚ˆã‚Š iframe å†…éƒ¨ã®ç¢ºèªã¯ã§ãã¾ã›ã‚“<br>ç›´æ¥ã‚¢ãƒ—ãƒªã§å‹•ä½œç¢ºèªã—ã¦ãã ã•ã„</div>';
                }
            };
            
            container.innerHTML = '';
            container.appendChild(iframe);
        }
        
        // Auto-run first two checks on load
        window.addEventListener('load', () => {
            checkWindowApp();
            checkShowMeetingView();
        });
    </script>
</body>
</html>
