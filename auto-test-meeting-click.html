<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>è‡ªå‹•ãƒ†ã‚¹ãƒˆ - ä¼šè­°ã‚¯ãƒªãƒƒã‚¯</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
        .log { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #667eea; }
        .success { border-left-color: #28a745; }
        .error { border-left-color: #dc3545; }
        .warning { border-left-color: #ffc107; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ§ª ä¼šè­°ã‚¯ãƒªãƒƒã‚¯ - è‡ªå‹•ãƒ†ã‚¹ãƒˆ</h1>
    <div id="logs"></div>
    
    <script>
        const logs = document.getElementById('logs');
        
        function addLog(message, type = 'log') {
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong> - ${message}`;
            logs.appendChild(div);
            console.log(message);
        }
        
        addLog('ãƒ†ã‚¹ãƒˆé–‹å§‹...', 'log');
        
        // Load the app in an iframe
        const iframe = document.createElement('iframe');
        iframe.src = '/minutes-app-enhanced.html';
        iframe.style.width = '100%';
        iframe.style.height = '600px';
        iframe.style.border = '2px solid #667eea';
        iframe.style.borderRadius = '8px';
        iframe.style.marginTop = '20px';
        
        iframe.onload = () => {
            addLog('âœ… ã‚¢ãƒ—ãƒªãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸ', 'success');
            
            setTimeout(() => {
                try {
                    const iframeWindow = iframe.contentWindow;
                    const iframeDocument = iframe.contentDocument;
                    
                    addLog('window.appã®ç¢ºèªä¸­...', 'log');
                    
                    if (iframeWindow.app) {
                        addLog('âœ… window.app ãŒå­˜åœ¨ã—ã¾ã™ï¼', 'success');
                        addLog(`app.showMeetingView: ${typeof iframeWindow.app.showMeetingView}`, 'log');
                        
                        // Try to login
                        addLog('è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ã‚’è©¦è¡Œä¸­...', 'log');
                        
                        const emailInput = iframeDocument.getElementById('email');
                        const passwordInput = iframeDocument.getElementById('password');
                        const loginBtn = iframeDocument.getElementById('loginBtn');
                        
                        if (emailInput && passwordInput && loginBtn) {
                            emailInput.value = 'admin@example.com';
                            passwordInput.value = 'Admin@123';
                            
                            addLog('èªè¨¼æƒ…å ±ã‚’å…¥åŠ›ã—ã¾ã—ãŸ', 'log');
                            addLog('ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™...', 'log');
                            
                            loginBtn.click();
                            
                            setTimeout(() => {
                                addLog('ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ç”»é¢ã‚’ç¢ºèªä¸­...', 'log');
                                
                                const meetingItems = iframeDocument.querySelectorAll('.meeting-item');
                                addLog(`ä¼šè­°ã‚¢ã‚¤ãƒ†ãƒ æ•°: ${meetingItems.length}`, 'log');
                                
                                if (meetingItems.length > 0) {
                                    addLog('âœ… ä¼šè­°ã‚¢ã‚¤ãƒ†ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼', 'success');
                                    addLog('æœ€åˆã®ä¼šè­°ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™...', 'log');
                                    
                                    // Click the first meeting
                                    meetingItems[0].click();
                                    
                                    setTimeout(() => {
                                        const minutesTable = iframeDocument.querySelector('.minutes-table');
                                        if (minutesTable) {
                                            addLog('âœ…âœ…âœ… æˆåŠŸï¼è­°äº‹éŒ²ãƒ†ãƒ¼ãƒ–ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼', 'success');
                                            addLog('ä¼šè­°ã‚¯ãƒªãƒƒã‚¯ã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼', 'success');
                                        } else {
                                            addLog('âš ï¸ è­°äº‹éŒ²ãƒ†ãƒ¼ãƒ–ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'warning');
                                            addLog('ç¾åœ¨ã®ç”»é¢: ' + iframeDocument.body.innerHTML.substring(0, 200), 'log');
                                        }
                                    }, 2000);
                                } else {
                                    addLog('âš ï¸ ã¾ã ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ã™ã€‚æ‰‹å‹•ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„', 'warning');
                                }
                            }, 3000);
                        } else {
                            addLog('âš ï¸ ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'warning');
                        }
                    } else {
                        addLog('âŒ window.app ãŒå­˜åœ¨ã—ã¾ã›ã‚“', 'error');
                    }
                } catch (e) {
                    addLog(`âš ï¸ ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ã‚¨ãƒ©ãƒ¼: ${e.message}`, 'warning');
                    addLog('æ‰‹å‹•ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ä¼šè­°ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„', 'log');
                }
            }, 3000);
        };
        
        document.body.appendChild(iframe);
    </script>
</body>
</html>
